# dairy_memo スタイルガイド

Claude Codeが日記メモを作成・編集する際に参照するルール。

---

## ディレクトリ構造

```
dairy_memo/
├── README.md                      # ルート目次（GitHub トップページ）
├── STYLE_GUIDE.md                 # 本ファイル
└── YYYY-MM-DD/                    # 日付ディレクトリ
    ├── README.md                  # サマリー（GitHub でフォルダ開くと自動表示）
    ├── 01_topic_name.md           # 詳細ファイル（連番+スネークケース）
    ├── 02_another_topic.md
    └── assets/                    # 画像・GIF・動画（必要な場合のみ作成）
        ├── screenshot.png
        └── demo.gif
```

- ルート `README.md`: 全日付の目次。日付降順で概要 + フォルダリンクを記載
- 日付ディレクトリ: `YYYY-MM-DD/` 形式
- サマリーファイル: `README.md`（GitHub がフォルダを開いた際に自動レンダリング）
- 詳細ファイル: `NN_topic_name.md`（`NN` は `01` から連番、名前はスネークケース英語）
- メディア: `assets/` サブフォルダに格納

---

## ルート README.md

リポジトリのトップページ。全日付の目次を日付降順で記載する。

### テンプレート

```markdown
# dairy_memo

## YYYY-MM-DD
- トピック1の概要
- トピック2の概要

→ [詳細](YYYY-MM-DD/)
```

### ルール

- 新しい日付を **ファイル先頭**（H1直後）に追加する（降順）
- 各日付はH2で見出し、箇条書きで概要、`→ [詳細](YYYY-MM-DD/)` でフォルダリンク

---

## サマリーファイル（各日付の README.md）

その日の作業概要を箇条書きで列挙し、各詳細ファイルへリンクする。GitHubでフォルダを開くと自動表示される。

### テンプレート

```markdown
# YYYY-MM-DD

- トピック1の概要（1行） → [詳細](01_topic_name.md)
- トピック2の概要（1行） → [詳細](02_another_topic.md)
- 補足事項（詳細ファイルが不要な軽い内容はリンクなし）
```

### ルール

- ファイル名は `README.md`（GitHub自動表示のため）
- H1で日付タイトル（`# YYYY-MM-DD`）
- 各トピックを箇条書き1行で要約
- 詳細ファイルがある場合は `→ [詳細](ファイル名.md)` で相対リンク
- サマリーには詳細な説明を書かない（詳細ファイルに委譲）

---

## 詳細ファイル共通ルール

- H1でファイルのタイトル
- H2でセクション分割
- H3, H4で深掘り（最大4段階）
- 定義リスト: `- **項目名**: 説明文`
- 構造化データ: テーブル形式（パラメータ、変更ファイル一覧等）
- コマンド・コード: コードブロック（言語指定: bash, yaml, cpp等）
- 疑似コード・フロー: コードブロック（言語指定なし）
- セクション間は `---`（水平線）で区切り

---

## 詳細ファイルの種類別テンプレート

### タイプA: 実装・設定変更系

```markdown
# タイトル

## セクション名
- **パラメータ名**: `変更前` → `変更後`（理由）
- **ファイル名**: 変更内容

## 実行結果
- 対象: `パス`
- コマンド: `実行コマンド`
- 結果: 数値や出力の要約
```

実例: `2026-02-17/01_glim_save_frame_plugin.md`

### タイプB: トラブルシューティング系

```markdown
# タイトル

## セクション名
- **問題**: 症状の説明
- **根本原因**: 原因の説明
- 試した対策:
  - 対策1 → 効果なし
  - 対策2 → 効果なし
  - **対策3 → 解決**
```

問題が複数ある場合は H3 で番号付きで分割:

```markdown
## 問題と修正

### 1. 問題名
- **症状**: ...
- **原因**: ...
- **試行1 (失敗)**: ...
- **修正**: ...

### 2. 別の問題名
- ...
```

実例: `2026-02-17/02_hesai_jt128_ros2.md`, `2026-02-18/01_map_cleaner_ros2_migration.md`

### タイプC: アルゴリズム説明系

```markdown
# タイトル

## 概要
- **入力**: ...
- **出力**: ...

## パイプライン全体図

（ASCIIアートでフローチャートを記述）

---

## 各ステップ詳細

### Step 1: ステップ名
- **ファイル**: `パス`

#### 1.1 サブテーマ

（疑似コードをコードブロックで記述）

#### 1.2 パラメータ

| パラメータ | デフォルト | 説明 |
|-----------|----------|------|
| param1 | value | 説明 |
```

実例: `2026-02-18/02_map_cleaner_algorithm.md`

### タイプD: 移行作業系

```markdown
# タイトル

## 概要
移行の概要を1〜2行で説明。

---

## 設計方針

| 項目 | 方針 |
|------|------|
| 項目1 | 方針の説明 |

---

## 変更ファイル一覧

### カテゴリ名

| ファイル | 変更内容 |
|----------|----------|
| `path/file` | 変更内容 |

---

## 問題と修正

（タイプBのパターンを使用）

---

## 実行方法

（bashコードブロックでコマンドを記載）

---

## 残課題

- タスク1
- タスク2
```

実例: `2026-02-18/01_map_cleaner_ros2_migration.md`

---

## メディアファイル

画像・GIF・動画は各日付フォルダ内の `assets/` サブフォルダに格納する。

### 配置ルール

- `assets/` フォルダはメディアが必要な場合のみ作成
- ファイル名はスネークケース英語（例: `rviz_screenshot.png`, `pointcloud_demo.gif`）

### Markdown内での参照

```markdown
![説明テキスト](assets/filename.png)
```

### サイズに関する注意

- **画像・GIF**: そのままgit管理（通常サイズなら問題なし）
- **動画**: 小さいもの（数MB程度）のみ直接管理。大きな動画は外部サービス（YouTube等）にアップロードしてリンクする
- GitHubの1ファイル上限は100MB

---

## 共通スタイルルール

| 要素 | ルール |
|------|--------|
| 箇条書き | `-` で統一（`*` や `+` は使わない） |
| ファイルパス | バッククォートで囲む（`` `path/to/file` ``） |
| コマンド・変数名 | バッククォートで囲む |
| 強調 | `**太字**` で重要語彙を強調 |
| セクション区切り | `---`（水平線） |
| 文体 | 簡潔な日本語、である調 |
| 段落 | 空行で適切に分離 |

---

## Claude Code向け作成手順

### 新しい日のメモを作成する場合

1. `YYYY-MM-DD/` ディレクトリを作成
2. トピックごとに `NN_topic_name.md` 詳細ファイルを作成（`01` から連番）
3. `YYYY-MM-DD/README.md` サマリーファイルを作成（詳細へのリンク付き）
4. ルート `README.md` の先頭（H1直後）に日付セクションを追加

### 既存の日にトピックを追加する場合

1. 既存の詳細ファイルの最大連番を確認
2. 最大+1の連番で新しい詳細ファイルを作成
3. `README.md`（サマリー）に箇条書き行を追加
4. 必要に応じてルート `README.md` の該当日付セクションも更新

### トピック分割の粒度

- 独立したテーマ（ツール・プロジェクト・問題）ごとに1ファイル
- 同一プロジェクトでも「実装作業」と「アルゴリズム説明」のように観点が異なれば別ファイル
- 軽い内容（1〜2行で済むもの）はサマリーに直接記載し、詳細ファイルは不要
